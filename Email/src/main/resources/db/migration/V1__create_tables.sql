CREATE TABLE emails (
    email_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email_from VARCHAR(255) NOT NULL,
    email_body TEXT NOT NULL,
    state INT CHECK (state IN (1, 2, 3, 4)),
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE email_to (
    to_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email_id BIGINT REFERENCES emails(email_id) ON DELETE CASCADE,
    email VARCHAR(255) NOT NULL
);

CREATE TABLE email_cc (
    cc_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email_id BIGINT REFERENCES emails(email_id) ON DELETE CASCADE,
    email VARCHAR(255) NOT NULL
);